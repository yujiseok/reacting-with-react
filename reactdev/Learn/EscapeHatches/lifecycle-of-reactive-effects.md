# Lifecycle of Reactive Effects

ì´í™íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ì„œë¡œ ë‹¤ë¥¸ ìƒëª…ì£¼ê¸°ë¥¼ ê°–ëŠ”ë‹¤. ì»´í¬ë„ŒíŠ¸ëŠ” ì•„ë§ˆ ë§ˆìš´íŠ¸, ì—…ë°ì´íŠ¸ ê·¸ë¦¬ê³  ì–¸ë§ˆìš´íŠ¸ ëœë‹¤.
ì´í™íŠ¸ëŠ” ì˜¤ì§ ë‘ ê°€ì§€ë¥¼ í•  ìˆ˜ ìˆë‹¤: ë¬´ì–¸ê°€ì™€ ì‹±í¬ë¥¼ ë§ì¶”ëŠ” ê²ƒ, ê·¸ë¦¬ê³  ì‹±í¬ë¥¼ ë©ˆì¶”ëŠ” ê²ƒ.
ì´ëŸ° ì£¼ê¸°ëŠ” ì´í™íŠ¸ê°€ í”„ëê³¼ ìƒíƒœì˜ ë³€í™”ì— ê¸°ë°˜í•˜ë©´ ì—¬ëŸ¬ë²ˆ ì¼ì–´ë‚  ìˆ˜ ìˆë‹¤.
ë¦¬ì•¡íŠ¸ëŠ” ë¦°í„°ë£°ì„ ì¶”ê°€í•´ ì˜¬ë°”ë¥¸ ì˜ì¡´ì„±ì„ ì¶”ê°€í–ˆëŠ”ì§€ ê²€ì‚¬í•´ì¤€ë‹¤.
ì´ê²ƒì€ ì´í™íŠ¸ê°€ ìµœì†Œì˜ í”„ëê³¼ ìƒíƒœì— ì‹±í¬ë¥¼ ë§ì¶”ë„ë¡ í•´ì¤€ë‹¤.

## The lifecycle of an Effect

ëª¨ë“  ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ëŠ” ë™ì¼í•œ ìƒëª…ì£¼ê¸°ë¥¼ ê°–ëŠ”ë‹¤.

- ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ì¶”ê°€ë˜ì—ˆì„ ë•Œ ë§ˆìš´íŠ¸ëœë‹¤.
- ìƒí˜¸ì‘ìš©ì˜ ê²°ê³¼ë¡œ ìƒˆë¡œìš´ í”„ëì´ë‚˜ ìƒíƒœë¥¼ ë°›ì•„ ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ëœë‹¤.
- í™”ë©´ì—ì„œ ì‚¬ë¼ì§ˆ ë•Œ ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ëœë‹¤.

ì´ê²ƒì€ ì´í™íŠ¸ê°€ ì•„ë‹ˆë¼, ì»´í¬ë„ŒíŠ¸ ê´€ì ì—ì„œ ìƒê°í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ëŒ€ì‹  ê° ì´í™íŠ¸ê°€ ì»´í¬ë„ŒíŠ¸ ìƒëª…ì£¼ê¸°ì™€ ë…ë¦½ì ì´ë¼ê³  ìƒê°í•´ë¼.
ì´í™íŠ¸ëŠ” í˜„ì¬ í”„ëê³¼ ìƒíƒœë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì–´ë–»ê²Œ ì‹±í¬ë¥¼ ë§ì¶œì§€ ì„¤ëª…í•œë‹¤.
ë‹¹ì‹ ì˜ ì½”ë“œê°€ ë³€ê²½ë˜ë©´ ì‹±í¬ëŠ” ë” ë§ì´ í˜¹ì€ ì ê²Œ ë™ì‘í•´ì•¼í•œë‹¤.

ì´ê²ƒì„ ì„¤ëª…í•˜ê¸° ìœ„í•´, ì±— ì„œë²„ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ì—°ê²°í•˜ëŠ” ì´í™íŠ¸ë¥¼ ìƒê°í•´ë³´ë¼.

```jsx
const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [roomId]);
  // ...
}
```

ë‹¹ì‹ ì˜ ì´í™íŠ¸ ë°”ë””ëŠ” ì–´ë–»ê²Œ ì‹±í¬ë¥¼ ë§ì¶œì§€ ì„¤ëª…í•œë‹¤.

ì´í™íŠ¸ì—ì„œ ë¦¬í„´ë˜ëŠ” ì •ë¦¬ í•¨ìˆ˜ëŠ” ì‹±í¬ë¥¼ ì–´ë–»ê²Œ ë©ˆì¶œì§€ ì„¤ëª…í•œë‹¤.

ì§ê´€ì ìœ¼ë¡œ, ë‹¹ì‹ ì€ ë¦¬ì•¡íŠ¸ê°€ ë§ˆìš´íŠ¸ ë˜ë©´ ì‹±í¬ë¥¼ ë§ì¶”ê³  ì–¸ë§ˆìš´íŠ¸ ë˜ë©´ ì‹±í¬ë¥¼ ë©ˆì¶˜ë‹¤ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•  ê²ƒì´ë‹¤.
í•˜ì§€ë§Œ, ì´ê²ƒìœ¼ë¡œ ì´ì•¼ê¸°ëŠ” ëë‚˜ì§€ ì•ŠëŠ”ë‹¤. ë•Œë¡œ, ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ëœ ìƒíƒœì—¬ë„ ì‹±í¬ë¥¼ ë§ì¶”ê³  ë©ˆì¶”ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤.

ì™œ í•„ìš”í•œì§€, ì–¸ì œ ì¼ì–´ë‚˜ëŠ”ì§€, ê·¸ë¦¬ê³  ì´ëŸ° ë™ì‘ì„ ì–´ë–»ê²Œ ì œì–´í• ì§€ ì‚´í´ë³´ì

#### Note

ì–´ë–¤ ì´í™íŠ¸ëŠ” ì •ë¦¬ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° ë³´ë‹¤ ë§ê²Œ, ë‹¹ì‹ ì€ í•˜ë‚˜ëŠ” ë°˜í™˜í•  ê²ƒ ì´ë‹¤. - ë‹¹ì‹ ì´ í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ë¦¬ì•¡íŠ¸ëŠ” ë¹ˆ ì •ë¦¬ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•  ê²ƒì´ë‹¤.

### Why synchronization may need to happen more than once

ì±—ë£¸ ì»´í¬ë„ŒíŠ¸ê°€ ìœ ì €ê°€ ë“œë¡­ë‹¤ìš´ì—ì„œ ê³ ë¥¸ roomId í”„ëì„ ë°›ëŠ”ë‹¤ê³  ìƒìƒí•´ë³´ì. ìœ ì €ê°€ ì²˜ìŒì—ëŠ” generalì„ roomIdë¡œ ê³¨ëë‹¤ê³  í•˜ì.
ë‹¹ì‹ ì˜ ì•±ì€ general ì±—ë£¸ì„ ë³´ì—¬ì¤„ ê²ƒì´ë‹¤.

```jsx
const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId /* "general" */ }) {
  // ...
  return <h1>Welcome to the {roomId} room!</h1>;
}
```

UIê°€ ë³´ì—¬ì§€ê³ , ë¦¬ì•¡íŠ¸ëŠ” ì´í™íŠ¸ë¥¼ ì‹¤í–‰í•´ ì‹±í¬ë¥¼ ë§ì¶˜ë‹¤. ì´ê²ƒì€ general ë£¸ê³¼ ì—°ê²°í•œë‹¤.

```jsx
function ChatRoom({ roomId /* "general" */ }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // Connects to the "general" room
    connection.connect();
    return () => {
      connection.disconnect(); // Disconnects from the "general" room
    };
  }, [roomId]);
  // ...
```

í›„ì—, ìœ ì €ê°€ ë“œë¡­ë‹¤ìš´ì—ì„œ ë‹¤ë¥¸ ë£¸ì„ ê³¨ëì„ ì‹œ e.g travel. ë¨¼ì €, ë¦¬ì•¡íŠ¸ëŠ” UIë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.

```jsx
function ChatRoom({ roomId /* "travel" */ }) {
  // ...
  return <h1>Welcome to the {roomId} room!</h1>;
}
```

ë‹¤ìŒì— ì–´ë–¤ì¼ì´ ì¼ì–´ë‚ ì§€ ìƒê°í•´ë´ë¼. ìœ ì €ëŠ” ì„ íƒëœ travel ì±— ë£¸ UIë¥¼ ë³¼ ê²ƒì´ë‹¤.
í•˜ì§€ë§Œ, ì´í™íŠ¸ëŠ” ì´ì „ì— ì¼ì–´ë‚¬ê¸°ì—, ì—¬ì „íˆ general ë£¸ì— ì—°ê²°ë˜ì–´ìˆë‹¤. roomId í”„ëì´ ë³€ê²½ë˜ì—ˆì–´ë„, ì´í™íŠ¸ê°€ ì´ì „ì— í–ˆë˜(general ë£¸ê³¼ ì—°ê²°)ê²ƒì€ UIì™€ ë”ì´ìƒ ë§ì§€ ì•ŠëŠ”ë‹¤.

ì´ ì‹œì ì—ì„œ, ë‹¹ì‹ ì€ ë¦¬ì•¡íŠ¸ê°€ ë‘ ê°€ì§€ë¥¼ ìˆ˜í–‰í•˜ê¸¸ ì›í•œë‹¤.

1. ì˜ˆì „ roomIdì™€ ì‹±í¬ë¥¼ ëŠê¸°
2. ìƒˆë¡œìš´ roomIdì™€ ì‹±í¬ ë§ì¶”ê¸°

ë‹¤í–‰íˆë„, ë¦¬ì•¡íŠ¸ê°€ ì´ê²ƒì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ ë°°ì› ë‹¤. ë‹¹ì‹ ì˜ ì´í™íŠ¸ ë°”ë””ëŠ” ì‹±í¬ë¥¼ ë§ì¶”ê³  ì •ë¦¬ í•¨ìˆ˜ëŠ” ì‹±í¬ë¥¼ ë©ˆì¶˜ë‹¤. ë¦¬ì•¡íŠ¸ê°€ ì´ê²ƒì„ ìœ„í•´ í•„ìš”í•œ ê²ƒì€ ì˜¤ì§ ì˜¬ë°”ë¥¸ í˜¸ì¶œ ìˆœì„œì™€ ì˜¬ë°”ë¥¸ í”„ëê³¼ ìƒíƒœë‹¤.

### How React re-synchronizes your Effect

ì±—ë£¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¬í˜¸ì¶œí•´ roomId í”„ëì˜ ìƒˆë¡œìš´ ê°’ì„ ë°›ëŠ”ë‹¤. generalì´ì—ˆë˜ ê²ƒì€ ì´ì œ travelì´ë‹¤.
ë¦¬ì•¡íŠ¸ëŠ” ì´í™íŠ¸ì˜ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶”ê³  ë‹¤ë¥¸ ì±—ë£¸ì„ ì—°ê²°í•´ì•¼í•œë‹¤.

ì‹±í¬ë¥¼ ë©ˆì¶”ê¸° ìœ„í•´, ë¦¬ì•¡íŠ¸ëŠ” general ë£¸ê³¼ ì—°ê²°ì„ ë§ì¶”ê³  ë°˜í™˜ëœ ì •ë¦¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
roomIdê°€ generalì´ê¸°ì—, ì •ë¦¬ í•¨ìˆ˜ëŠ” generalì˜ ì—°ê²°ì„ ëŠëŠ”ë‹¤.

```jsx
function ChatRoom({ roomId /* "general" */ }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // Connects to the "general" room
    connection.connect();
    return () => {
      connection.disconnect(); // Disconnects from the "general" room
    };
    // ...

```

ê·¸ í›„ ë¦¬ì•¡íŠ¸ëŠ” ì´ë²ˆ ëœë”ì—ì„œ ì œê³µëœ ì´í™íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤. ì´ì œ, roomIdëŠ” travelë¡œ travel ì±—ë£¸ê³¼ ì‹±í¬ë¥¼ ë§ì¶˜ë‹¤. (ì •ë¦¬ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê¸° ì „ê¹Œì§€)

```jsx
function ChatRoom({ roomId /* "travel" */ }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // Connects to the "travel" room
    connection.connect();
    // ...
```

ì´ê²ƒì— ê°ì‚¬í•´ë¼, ë‹¹ì‹ ì€ ì´ì œ ìœ ì €ê°€ ê³ ë¥¸ UIì™€ ë˜‘ê°™ì€ ë£¸ì— ì—°ê²°ëë‹¤. ì¬ì•™ì„ í”¼í–ˆë‹¤.

ë‹¹ì‹ ì˜ ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ë¥¸ roomIdì™€ ë§¤ë²ˆ ë¦¬ëœë”ë¥¼ ì¼ìœ¼í‚¤ê³ , ë‹¹ì‹ ì˜ ì´í™íŠ¸ëŠ” ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶˜ë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, ìœ ì €ê°€ roomIdë¥¼ travel -> musicìœ¼ë¡œ ë°”ê¿¨ë‹¤ê³  ìƒê°í•˜ì.
ë¦¬ì•¡íŠ¸ëŠ” ë˜ ë‹¤ì‹œ ì‹±í¬ë¥¼ ë©ˆì¶”ê³  travelê³¼ ì—°ê²°ì„ ëŠëŠ”ë‹¤. ê·¸ë¦¬ê³  ìƒˆë¡œìš´ roomId(music)ê³¼ ì‹±í¬ë¥¼ ë§ì¶˜ë‹¤.

ìµœì¢…ì ìœ¼ë¡œ, ìœ ì €ê°€ ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•´ ì±—ë£¸ì´ ì–¸ë§ˆìš´íŠ¸ ë˜ë©´, ì´ì œ ì—°ê²°ë  í•„ìš”ê°€ ì „í˜€ì—†ë‹¤.
ë¦¬ì•¡íŠ¸ëŠ” ìµœì¢…ì ìœ¼ë¡œ ì‹±í¬ë¥¼ ë©ˆì¶”ê³  music ì±—ë£¸ê³¼ ì—°ê²°ì„ ëŠëŠ”ë‹¤.

### Thinking from the Effectâ€™s perspective

ì±—ë£¸ ì»´í¬ë„ŒíŠ¸ì˜ ê´€ì ì—ì„œ ìƒê°í•´ë³´ì.

1. ì±—ë£¸ì´ generalë¡œ ë§ˆìš´íŠ¸
2. ì±—ë£¸ì´ travelë¡œ ì—…ë°ì´íŠ¸
3. ì±—ë£¸ì´ musicìœ¼ë¡œ ì—…ë°ì´íŠ¸
4. ì±—ë£¸ ì–¸ë§ˆìš´íŠ¸

ê° ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª…ì£¼ê¸° ë™ì•ˆ, ì´í™íŠ¸ëŠ” ë‹¤ë¥¸ ë™ì‘ì„ ì·¨í•œë‹¤.

1. ì´í™íŠ¸ëŠ” general ë£¸ê³¼ ì—°ê²°
2. generalê³¼ ì—°ê²°ì„ ëŠê³  travelê³¼ ì—°ê²°
3. travelê³¼ ì—°ê²°ì„ ëŠê³  musicê³¼ ì—°ê²°
4. music ë£¸ì˜ ì—°ê²°ì„ ëŠìŒ

ì´ì œ ì´í™íŠ¸ ê´€ì ì—ì„œ ë¬´ìŠ¨ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ë³´ì.

```jsx
useEffect(() => {
  // Your Effect connected to the room specified with roomId...
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => {
    // ...until it disconnected
    connection.disconnect();
  };
}, [roomId]);
```

ì´ ì½”ë“œ êµ¬ì¡°ëŠ” ê²¹ì¹˜ì§€ ì•ˆí” ì‹œê°„ ìˆœì„œì— ë”°ë¼ ì–´ë–»ê²Œ ë™ì‘í–ˆëŠ”ì§€ ì•Œë ¤ì¤€ë‹¤.

1. ì´í™íŠ¸ê°€ general ë£¸ì„ ì—°ê²°(ì—°ê²° í•´ì œë  ë•Œê¹Œì§€)
2. ì´í™íŠ¸ê°€ travel ë£¸ì„ ì—°ê²°(ì—°ê²° í•´ì œë  ë•Œê¹Œì§€)
3. ì´í™íŠ¸ê°€ music ë£¸ì„ ì—°ê²°(ì—°ê²° í•´ì œë  ë•Œê¹Œì§€)

ì´ì „ì—, ë‹¹ì‹ ì€ ì»´í¬ë„ŒíŠ¸ ê´€ì ì—ì„œ ë´¤ë‹¤. ì»´í¬ë„ŒíŠ¸ ê´€ì ì—ì„œ, ì´í™íŠ¸ë¥¼ ëœë” í›„ í˜¹ì€ ì–¸ë§ˆìš´íŠ¸ ì „ ë“± íŠ¹ì • ì‹œê°„ì— í˜¸ì¶œë˜ëŠ” ì½œë°± í˜¹ì€ ìƒëª…ì£¼ê¸° ì´ë²¤íŠ¸ë¡œ ìƒê°í•˜ê¸° ì‰½ë‹¤. ì´ëŸ° ìƒê°ì€ ë³µì¡í•´ì§€ê¸° ì‰½ê³ , í”¼í•´ì•¼í•œë‹¤.

ëŒ€ì‹ ì—, í•­ìƒ í•œ ë²ˆì— í•˜ë‚˜ì˜ ì‹œì‘/ì •ì§€ ì‚¬ì´í´ì— ì§‘ì¤‘í•´ë¼. ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸, ì—…ë°ì´íŠ¸ ë˜ëŠ” ì–¸ë§ˆìš´íŠ¸ ë˜ëŠ” ê²ƒì€ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤.
ë‹¹ì‹ ì´ ëª…ì‹¬í•´ì•¼í•˜ëŠ” ê²ƒì€ ì–´ë–»ê²Œ ì‹±í¬ë¥¼ ë§ì¶”ëŠ” ê²ƒì„ ì‹œì‘í• ì§€ì™€ ì–´ë–»ê²Œ ë©ˆì¶œì§€ì´ë‹¤.
ì´ê²ƒì„ ì˜í•˜ë©´, ë‹¹ì‹ ì˜ ì´í™íŠ¸ëŠ” ê·¸ê²ƒì´ ì›í•˜ëŠ” ë§Œí¼ íƒ„ë ¥ì ìœ¼ë¡œ ì‹œì‘í•˜ê³  ë©ˆì¶œê²ƒì´ë‹¤.

ì´ê²ƒì€ ë‹¹ì‹ ì´ JSXë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ëœë”ë§ ë¡œì§ì„ ì‘ì„±í•˜ë©°, ì»´í¬ë„ŒíŠ¸ê°€ ì–´ë–»ê²Œ ë§ˆìš´íŠ¸ë˜ê³  ì—…ë°ì´íŠ¸ë˜ëŠ”ì§€ ê³ ë ¤ë¥¼ ì•ˆí•´ë„ ë˜ëŠ” ê²ƒì„ ë– ì˜¬ë¦¬ê²Œí•œë‹¤. ë‹¹ì‹ ì€ ë¬´ì—‡ì„ í™”ë©´ì— ë³´ì¼ì§€ ê²°ì •í•˜ê³ , ë¦¬ì•¡íŠ¸ëŠ” ë‚˜ë¨¸ì§€ë¥¼ ìˆ˜í–‰í•œë‹¤.

### How React verifies that your Effect can re-synchronize

ì˜¤í”ˆ ì±— ë²„íŠ¼ì„ ëˆŒëŸ¬ ì±—ë£¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§ˆìš´íŠ¸ ì‹œí‚¤ëŠ” ì˜ˆê°€ ìˆë‹¤.

```jsx
import { useState, useEffect } from "react";
import { createConnection } from "./chat.js";

const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);
  return <h1>Welcome to the {roomId} room!</h1>;
}

export default function App() {
  const [roomId, setRoomId] = useState("general");
  const [show, setShow] = useState(false);
  return (
    <>
      <label>
        Choose the chat room:{" "}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <button onClick={() => setShow(!show)}>
        {show ? "Close chat" : "Open chat"}
      </button>
      {show && <hr />}
      {show && <ChatRoom roomId={roomId} />}
    </>
  );
}
```

ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë§ˆìš´íŠ¸ ë˜ë©´, ë‹¹ì‹ ì€ ì„¸ ê°€ì§€ ë¡œê·¸ë¥¼ ë³´ê²Œë  ê²ƒì´ë‹¤.

1. âœ… Connecting to "general" room at https://localhost:1234... (development-only)
2. âŒ Disconnected from "general" room at https://localhost:1234. (development-only)
3. âœ… Connecting to "general" room at https://localhost:1234...

ì•ì˜ ë‘ ë¡œê·¸ëŠ” ì˜¤ì§ ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì‘ë™í•œë‹¤. ê°œë°œ í™˜ê²½ì—ì„œ ë¦¬ì•¡íŠ¸ëŠ” í•­ìƒ ì»´í¬ë„ŒíŠ¸ë¥¼ í•œ ë²ˆì”© ë¦¬ë§ˆìš´íŠ¸í•œë‹¤.

ë¦¬ì•¡íŠ¸ëŠ” ê°œë°œì‹œ ì¦‰ì‹œ ì´í™íŠ¸ê°€ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶œìˆ˜ ìˆë„ë¡ í™•ì¸í•œë‹¤. ì´ê²ƒì€ ë‹¹ì‹ ì´ ë¬¸ì´ ì ê²¼ë‚˜ ìˆ˜ì‹œë¡œ ë¬¸ì„ í™•ì¸í•˜ëŠ” ê²ƒì„ ë– ì˜¬ë¦¬ê²Œí•œë‹¤.
ë¦¬ì•¡íŠ¸ëŠ” ì´í™íŠ¸ë¥¼ ì‹œì‘í•˜ê³  ë©ˆì¶”ë©° ë‹¹ì‹ ì´ ì •ë¦¬ í•¨ìˆ˜ë¥¼ ì˜ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸í•œë‹¤.

ì˜ˆì—ì„œ ì´í™íŠ¸ê°€ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶”ëŠ” ì£¼ ì´ìœ ëŠ” ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ê°€ ë³€í–ˆê¸° ë•Œë¬¸ì´ë‹¤. ìƒŒë“œë°•ìŠ¤ì—ì„œ ì„ íƒëœ ì±—ë£¸ì„ ë°”ê¾¸ëŠ” ê²ƒ.
roomIdê°€ ë³€í•˜ë©´ ì–´ë–»ê²Œ ì´í™íŠ¸ê°€ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶”ëŠ”ì§€ í™•ì¸í•´ë¼.

í•˜ì§€ë§Œ, ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶°ì•¼í•˜ëŠ” ì¼ë°˜ì ì´ì§€ ì•Šì€ ìƒí™©ë„ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì˜ˆì—ì„œ ì±—ì´ ì—´ë ¤ìˆëŠ”ë° serverUrlì„ ë³€ê²½í–ˆì„ ê²½ìš°ì´ë‹¤.
ì´í™íŠ¸ê°€ ì½”ë“œ ë³€ê²½ì˜ ì‘ë‹µìœ¼ë¡œ ì–´ë–»ê²Œ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶”ëŠ”ì§€ í™•ì¸í•´ë¼. í›„ì—, ë¦¬ì•¡íŠ¸ëŠ” ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶”ëŠ” ê²ƒì— ë” ë§ì€ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ê²ƒì´ë‹¤.

### How React knows that it needs to re-synchronize the Effect

ë‹¹ì‹ ì€ ë¦¬ì•¡íŠ¸ê°€ roomIdê°€ ë³€í•œ ë’¤ ì¬ì‹±í¬ë¥¼ ë§ì¶”ëŠ” ê²ƒì„ ì•„ëŠ”ì§€ ê¶ê¸ˆí•  ê²ƒì´ë‹¤.
ê·¸ê²ƒì€ ë‹¹ì‹ ì´ ë¦¬ì•¡íŠ¸ì—ê²Œ roomIdì— ë‹¬ë ¤ìˆë‹¤ê³  ì˜ì¡´ì„± ë°°ì—´ì— ì¶”ê°€í–ˆê¸° ë•Œë¬¸ì´ë‹¤.

```jsx
function ChatRoom({ roomId }) { // The roomId prop may change over time
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // This Effect reads roomId
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [roomId]); // So you tell React that this Effect "depends on" roomId
  // ...
```

ì‘ë™ ë°©ì‹

1. ë‹¹ì‹ ì€ roomIdê°€ ìˆ˜ì‹œë¡œ ë°”ë€ŒëŠ” í”„ëì´ë¼ëŠ” ê²ƒì„ ì•ˆë‹¤.
2. ë‹¹ì‹ ì€ ì´í™íŠ¸ê°€ roomIdë¥¼ ì½ëŠ” ê²ƒì„ ì•ˆë‹¤.
3. ì´ê²ƒì´ íŠ¹ì • ì˜ì¡´ì„±ìœ¼ë¡œ ëª…ì‹œí•œ ì´ìœ ì´ë‹¤.

ë§¤ë²ˆ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ëœë”ë  ì‹œ, ë¦¬ì•¡íŠ¸ëŠ” ë‹¹ì‹ ì´ ì „ë‹¬í•œ ì˜ì¡´ì„± ë°°ì—´ì„ ì‚´í´ë³¸ë‹¤.
ë§Œì•½ ë°°ì—´ì˜ ë™ì¼í•œ ì¥ì†Œ ì˜ì¡´ì„±ì´ ì´ì „ ëœë”ì™€ ë‹¤ë¥´ë‹¤ë©´, ë¦¬ì•¡íŠ¸ëŠ” ì´í™íŠ¸ì˜ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶˜ë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ì´ˆê¸° ëœë”ì‹œ ["general"]ë¥¼ ì „ë‹¬í•˜ê³ , í›„ì— ë‹¹ì‹ ì´ ["travel"]ë¥¼ ë‹¤ìŒ ëœë”ì— ì „ë‹¬í–ˆë‹¤ë©´, ë¦¬ì•¡íŠ¸ëŠ” generalê³¼
travelì„ ë¹„êµí•œë‹¤. ì´ê²ƒë“¤ì€ ë‹¤ë¥¸ ê°’ì´ê¸°ì—(Object.is ë¹„êµ), ë¦¬ì•¡íŠ¸ëŠ” ì´í™ì˜ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶˜ë‹¤.
ë§Œì•½, roomIdê°€ ë¦¬ëœë” í›„ì—ë„ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ë©´, ì´í™íŠ¸ëŠ” ë™ì¼í•œ ì±—ë£¸ì„ ì—°ê²°ëœ ìƒíƒœë¡œ ë‘”ë‹¤.

### Each Effect represents a separate synchronization process

ì´ì „ì— ì‘ì„±ëœ ë¡œì§ê³¼ ê´€ë ¨ì´ ì—†ëŠ” ë¡œì§ì„ ì¶”ê°€í•˜ì§€ë§ˆë¼. ì±—ë£¸ì— ì ‘ì†í–ˆì„ ì‹œ ë¶„ì„ ì´ë²¤íŠ¸ë¥¼ ë³´ë‚´ëŠ” ì˜ˆê°€ ìˆë‹¤.
ë‹¹ì‹ ì€ ì´ë¯¸ roomIdì— ì˜ì¡´í•˜ëŠ” ì´í™íŠ¸ë¥¼ ì‘ì„±í–ˆê³ , ë‹¹ì‹ ì€ ë¶„ì„ì˜ í˜¸ì¶œì„ ì¶”ê°€í•˜ê³  ì‹¶ì„ ê²ƒì´ë‹¤.

```jsx
function ChatRoom({ roomId }) {
  useEffect(() => {
    logVisit(roomId);
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [roomId]);
  // ...
}
```

í•˜ì§€ë§Œ ì´í›„ì— ì—°ê²°ì„ ì¬ì‹œë„í•˜ëŠ” ë‹¤ë¥¸ ì˜ì¡´ì„±ì„ ì¶”ê°€í•œë‹¤ê³  ìƒê°í•´ë³´ì. ë§Œì•½, ì´í™íŠ¸ê°€ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶”ê²Œ ë˜ë©´, ë‹¹ì‹ ì´ ì˜ë„í•˜ì§€ ì•Šì€ logVisit(roomId) ì—­ì‹œ í˜¸ì¶œë  ê²ƒì´ë‹¤. ë°©ë¬¸ ë¡œê·¸ë¥¼ ì°ëŠ” ê²ƒì€ ì—°ê²°ê³¼ ë¶„ë¦¬ëœ ì‘ì—…ì´ë‹¤.
ë‘ ê°œì˜ ë‹¤ë¥¸ ì´í™íŠ¸ì— ì‘ì„±í•œë‹¤.

```jsx
function ChatRoom({ roomId }) {
  useEffect(() => {
    logVisit(roomId);
  }, [roomId]);

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    // ...
  }, [roomId]);
  // ...
}
```

ê° ì´í™íŠ¸ì•ˆì—ëŠ” ë¶„ë¦¬ë˜ê³  ë…ë¦½ì ì¸ ì‹±í¬ ì‘ì—… ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼í•œë‹¤.

ìœ„ì˜ ì˜ˆì—ì„œ, í•˜ë‚˜ì˜ ì´í™íŠ¸ë¥¼ ì œê±°í•œë‹¤ê³  ë‹¤ë¥¸ ì´í™íŠ¸ ë¡œì§ì„ ë§ê°€íŠ¸ë¦¬ì§€ ì•ŠëŠ”ë‹¤. ì´ê²ƒì€ ê·¸ë“¤ì´ ë‹¤ë¥¸ ê²ƒì— ì‹±í¬ë¥¼ ë§ì¶˜ë‹¤ëŠ” ì¢‹ì€ ì§€ì¹¨ì´ë©°, ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ë§ì´ ëœë‹¤.
ì´ë ‡ê²Œ ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒì€ ê°€ë…ì„±ì´ ì¢‹ì§€ë§Œ, ìœ ì§€ ë³´ìˆ˜ê°€ ì–´ë ¤ìš¸ìˆ˜ ìˆë‹¤.
ì´ê²ƒì´ ë‹¹ì‹ ì´ ê°€ë…ì„±ì´ ì•„ë‹Œ, ì½”ë“œì˜ ì‘ì—…ì´ ê°™ì„ì§€ ë‹¤ë¥¼ì§€ë¥¼ ìƒê°í•´ì•¼í•˜ëŠ” ì´ìœ ë‹¤.

## Effects â€œreactâ€ to reactive values

ë‹¹ì‹ ì˜ ì´í™íŠ¸ëŠ” serverUrlì™€ roomId ë‘ ê°€ì§€ ë³€ìˆ˜ë¥¼ ì½ì§€ë§Œ, roomIdë§Œì„ ì˜ì¡´ì„±ìœ¼ë¡œ ëª…ì‹œí–ˆë‹¤.

```jsx
const serverUrl = "https://localhost:1234";

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [roomId]);
  // ...
}
```

ì™œ serverUrlì€ ì˜ì¡´ì„±ì´ ì•„ë‹ê¹Œ?

serverUrlì€ ë¦¬ëœë” ì¤‘ì— ì ˆëŒ€ ë³€í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë¦¬ê³  ì´ê²ƒì€ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ëœë”ë¥¼ ì•„ë¬´ë¦¬ ë§ì´í•´ë„ ë˜‘ê°™ë‹¤.
serverUrlì´ ì ˆëŒ€ ë³€í•˜ì§€ ì•Šê¸°ì— ì˜ì¡´ì„±ì— ì¶”ê°€í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ë§ì´ ëœë‹¤.
ì˜ì¡´ì„±ì€ ê·¸ë“¤ì´ ë³€í–ˆì„ ì‹œì—ë§Œ ë™ì‘í•œë‹¤.

roomIdëŠ” ë¦¬ëœë”ì‹œ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤. í”„ë, ìƒíƒœ ê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸ ì•ˆì— ì„ ì–¸ëœ ê°’ë“¤ì€ ëœë” ì¤‘ ê³„ì‚°ë˜ê³ , ë¦¬ì•¡íŠ¸ ë°ì´í„° í”Œë¡œìš°ì— ì†í•´ìˆë‹¤.

ë§Œì•½ serverUrlì´ ìƒíƒœ ë³€ìˆ˜ë¼ë©´, ì´ê²ƒì€ ë°˜ì‘ì„±ì´ ìˆë‹¤. ë°˜ì‘ì„± ê°’ë“¤ì€ ë°˜ë“œì‹œ ì˜ì¡´ì„±ì— í¬í•¨ë˜ì–´ì•¼í•œë‹¤.

```jsx
function ChatRoom({ roomId }) {
  // Props change over time
  const [serverUrl, setServerUrl] = useState("https://localhost:1234"); // State may change over time

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // Your Effect reads props and state
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [roomId, serverUrl]); // So you tell React that this Effect "depends on" on props and state
  // ...
}
```

serverUrlë¥¼ ì˜ì¡´ì„±ì— ì¶”ê°€í•´, ë‹¹ì‹ ì€ ê·¸ê²ƒì´ ë³€í•  ì‹œ ì´í™íŠ¸ê°€ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶”ëŠ” ê²ƒì„ ë³´ì¥í•œë‹¤.

roomIdë‚˜ serverUrlê³¼ ê°™ì€ ë°˜ì‘ì„± ê°’ë“¤ì´ ë³€í™”í•˜ë©´, ì´í™íŠ¸ëŠ” ì±— ì„œë²„ì— ë‹¤ì‹œ ì—°ê²°í•œë‹¤.

### What an Effect with empty dependencies means

ë§Œì•½ roomIdì™€ serverUrlì´ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì— ìˆë‹¤ë©´ ì–´ë–¨ê¹Œ?

```jsx
const serverUrl = "https://localhost:1234";
const roomId = "general";

function ChatRoom() {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, []); // âœ… All dependencies declared
  // ...
}
```

ì´ì œ ë‹¹ì‹ ì˜ ì´í™íŠ¸ ì½”ë“œëŠ” ë°˜ì‘ì„± ê°’ì´ ì—†ìœ¼ë¯€ë¡œ, ì˜ì¡´ì„±ì€ ë¹„ê²Œëœë‹¤([]).

ì»´í¬ë„ŒíŠ¸ ê´€ì ì—ì„œ, ë¹ˆ ì˜ì¡´ì„± ë°°ì—´ì€ ì´í™íŠ¸ëŠ” ë§ˆìš´íŠ¸ë  ì‹œ ì±—ë£¸ì„ ì—°ê²°í•˜ê³  ì–¸ë§ˆìš´íŠ¸ë  ì‹œ ì—°ê²°ì„ ëŠëŠ”ë‹¤.

```jsx
import { useState, useEffect } from "react";
import { createConnection } from "./chat.js";

const serverUrl = "https://localhost:1234";
const roomId = "general";

function ChatRoom() {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []);
  return <h1>Welcome to the {roomId} room!</h1>;
}

export default function App() {
  const [show, setShow] = useState(false);
  return (
    <>
      <button onClick={() => setShow(!show)}>
        {show ? "Close chat" : "Open chat"}
      </button>
      {show && <hr />}
      {show && <ChatRoom />}
    </>
  );
}
```

í•˜ì§€ë§Œ, ì´í™íŠ¸ì˜ ê´€ì ì—ì„œ ë‹¹ì‹œëŠ” ë§ˆìš´íŠ¸ì™€ ì–¸ë§ˆìš´íŠ¸ë¥¼ ìƒê°í•  í•„ìš” ì—†ë‹¤.
ì¤‘ìš”í•œ ê²ƒì€ ë‹¹ì‹ ì´ ì´í™íŠ¸ê°€ ë¬´ì—‡ì— ì‹±í¬ë¥¼ ë§ì¶”ëŠ” ê²ƒì„ ì‹œì‘í•˜ê³  ì¤‘ì§€í•˜ëŠ”ì§€ ëª…ì‹œí•˜ëŠ” ê²ƒì´ë‹¤.
í˜„ì¬, ì´ê²ƒì€ ë°˜ì‘ì„±ìˆëŠ” ì˜ì¡´ì„±ì´ ì—†ë‹¤. í•˜ì§€ë§Œ, ìœ ì €ê°€ roomIdë‚˜ serverUrlì„ ë³€ê²½í•˜ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´, ë‹¹ì‹ ì˜ ì´í™íŠ¸ëŠ” ë³€í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. ë‹¹ì‹ ì€ ê·¸ë“¤ì„ ì˜ì¡´ì„±ì— ì¶”ê°€í•´ì•¼í•œë‹¤.

### All variables declared in the component body are reactive

í”„ëê³¼ ìƒíƒœë§Œì´ ë°˜ì‘ ê°’ì¸ê²ƒì€ ì•„ë‹ˆë‹¤. ê·¸ë“¤ë¡œ ê³„ì‚°í•œ ê°’ë“¤ë„ ì—­ì‹œ ë°˜ì‘ì„±ì´ìˆë‹¤.
ë§Œì•½ í”„ëê³¼ ìƒíƒœê°€ ë³€í™”í•˜ë©´, ë‹¹ì‹ ì˜ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ëœë”ë˜ê³ , ê·¸ë“¤ë¡œ ê³„ì‚°ë˜ëŠ” ê°’ë“¤ ì—­ì‹œ ë³€ê²½ëœë‹¤.
ì´ê²ƒì´ ì»´í¬ë„ŒíŠ¸ ëª¸ì²´ì˜ ëª¨ë“  ê°’ë“¤ì´ ì´í™íŠ¸ì˜ ì˜ì¡´ì„±ì— ì¶”ê°€ë˜ì–´ì•¼í•˜ëŠ” ì´ìœ ë‹¤.

ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ì±— ì„œë²„ë¥¼ ì„ íƒí•  ìˆ˜ ìˆê³ , ê¸°ë³¸ ì„œë²„ìœ¼ë¡œ ì„¤ì •ëœ ì„œë²„ë¥¼ ì‚¬ìš©í• ìˆ˜ ìˆëŠ” ì˜ˆê°€ ìˆë‹¤.
ë‹¹ì‹ ì´ ì´ë¯¸ ì»¨í…ìŠ¤íŠ¸ì— ê¸°ë³¸ ì„¤ì •ì„ í–ˆë‹¤ê³  ìƒê°í•˜ì.
ì´ì œ ë‹¹ì‹ ì€ serverUrlì„ ì„ íƒëœ ì„œë²„ í”„ëê³¼ ê¸°ë³¸ ì„œë²„ì—ì„œ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤.

```jsx
function ChatRoom({ roomId, selectedServerUrl }) {
  // roomId is reactive
  const settings = useContext(SettingsContext); // settings is reactive
  const serverUrl = selectedServerUrl ?? settings.defaultServerUrl; // serverUrl is reactive
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // Your Effect reads roomId and serverUrl
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [roomId, serverUrl]); // So it needs to re-synchronize when either of them changes!
  // ...
}
```

ì´ ì˜ˆì—ì„œ serverUrlì€ í”„ëì´ë‚˜ ìƒíƒœ ë³€ìˆ˜ê°€ ì•„ë‹ˆë‹¤. ì´ê²ƒì€ ëœë”ì¤‘ì— ìƒì„±ë˜ëŠ” ì¼ë°˜ì ì¸ ë³€ìˆ˜ë‹¤.
ê·¸ëŸ¬ë‚˜ ì´ê²ƒì€ ëœë”ì¤‘ì— ê³„ì‚°ë˜ë¯€ë¡œ, ì´ê²ƒì€ ë¦¬ëœë”ì¤‘ ë³€ê²½ë  ìˆ˜ ìˆë‹¤. ì´ê²ƒì´ ë°˜ì‘ì„±ì´ ìˆëŠ” ì´ìœ ë‹¤.

ì»´í¬ë„ŒíŠ¸ ì•ˆì˜ ëª¨ë“  ê°’(í”„ë, ìƒíƒœ, ì»´í¬ë„ŒíŠ¸ ëª¸ì²´ì˜ ë³€ìˆ˜ë“¤)ì€ ë°˜ì‘ì„±ì´ìˆë‹¤.
ì´ëŸ° ë°˜ì‘ì„± ê°’ì€ ë¦¬ëœë” ì‹œ ë³€ê²½ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´í™íŠ¸ì˜ ì˜ì¡´ì„±ì— ì¶”ê°€í•´ì•¼í•œë‹¤.

ë‹¤ë¥¸ ë§ë¡œ, ì´í™íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ë“  ê°’ìœ¼ë¡œ ë¶€í„° ë°˜ì‘í•œë‹¤.

#### DEEP DIVE - Can global or mutable values be dependencies?

ë®¤í„°ë¸” ê°’(ì „ì—­ ë³€ìˆ˜ í¬í•¨)ì€ ë°˜ì‘ì„±ì´ ì•„ë‹ˆë‹¤.

location.pathnameê³¼ ê°™ì€ ë®¤í„°ë¸” ê°’ì€ ì˜ì¡´ì„±ì´ ë  ìˆ˜ ì—†ë‹¤. ì´ê²ƒì€ ë®¤í„°ë¸”í•˜ë¯€ë¡œ, ë¦¬ì•¡íŠ¸ì˜ ëœë”ë§ ë°ì´í„° í”Œë¡œìš° ë°–ì—ì„œë„ ë³€ê²½ë  ìˆ˜ ìˆë‹¤. ì´ê²ƒì˜ ë³€ê²½ì´ ì»´í¬ë„ŒíŠ¸ ë¦¬ëœë”ë§ì„ ì¼ìœ¼í‚¤ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ, ì˜ì¡´ì„±ì— ëª…ì‹œí–ˆì–´ë„ ë¦¬ì•¡íŠ¸ëŠ” ì´í™íŠ¸ë¥¼ ì–¸ì œ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶°ì•¼í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ë‹¤. ì´ê²ƒì€ ë˜í•œ ë¦¬ì•¡íŠ¸ì˜ ë£°ì„ ì–´ê¸°ëŠ” ê²ƒìœ¼ë¡œ, ëœë”ë§ì¤‘ ë®¤í„°ë¸”í•œ ë°ì´í„°ë¥¼ ì½ëŠ” ê²ƒì€ ëœë”ì˜ ìˆœìˆ˜ì„±ì„ í•´ì¹œë‹¤.
ëŒ€ì‹ ì—, useSyncExternalStoreë¥¼ í†µí•´ ì™¸ë¶€ì˜ ë®¤í„°ë¸”í•œ ê°’ì„ êµ¬ë…í•  ìˆ˜ ìˆë‹¤.

ref.currentì™€ ê°™ì€ ë®¤í„°ë¸” ê°’ ì—­ì‹œ ì˜ì¡´ì„±ì´ ë  ìˆ˜ ì—†ë‹¤. useRefë¡œ ë°˜í™˜ë˜ëŠ” ref ì˜¤ë¸Œì íŠ¸ëŠ” ì˜ì¡´ì„±ì´ ë  ìˆ˜ ìˆì§€ë§Œ, current í”„ë¡œí¼í‹°ëŠ” ë®¤í„°ë¸”í•˜ë‹¤. ì´ê²ƒì€ ë¦¬ëœë”ë¥¼ ì¼ìœ¼í‚¤ì§€ ì•Šê³  ê°’ì„ ì¶”ì í•  ìˆ˜ ìˆê²Œ í•œë‹¤. ì´ê²ƒì˜ ë³€ê²½ì´ ë¦¬ëœë”ë¥¼ ì¼ìœ¼í‚¤ì§€ ì•Šê¸°ì— ì´ê²ƒì€ ë°˜ì‘ ê°’ì´ ì•„ë‹ˆë©°, ë¦¬ì•¡íŠ¸ëŠ” ì–¸ì œ ì´í™íŠ¸ë¥¼ ì‹¤í–‰í•´ì•¼í•˜ëŠ”ì§€ ëª¨ë¥¸ë‹¤.

ë¦°í„°ê°€ ì´ê²ƒì„ ìë™ìœ¼ë¡œ ì²´í¬í•´ì¤€ë‹¤.

### React verifies that you specified every reactive value as a dependency

ë§Œì•½ ë¦°í„°ê°€ ì„¤ì •ì´ ë˜ì–´ìˆë‹¤ë©´, ì´ê²ƒì€ ì˜ì¡´ì„±ì— ì„ ì–¸ë˜ì–´ ì´í™íŠ¸ ì½”ë“œì— ì‚¬ìš©ë˜ëŠ” ë°˜ì‘ ê°’ì„ ì²´í¬í•œë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, roomIdì™€ serverUrlëŠ” ë°˜ì‘ ê°’ì´ê¸°ì— ë¦°í„°ê°€ ì—ëŸ¬ë¥¼ ë°œìƒí•œë‹¤.

```jsx
import { useState, useEffect } from "react";
import { createConnection } from "./chat.js";

function ChatRoom({ roomId }) {
  // roomId is reactive
  const [serverUrl, setServerUrl] = useState("https://localhost:1234"); // serverUrl is reactive

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []); // <-- Something's wrong here!

  return (
    <>
      <label>
        Server URL:{" "}
        <input
          value={serverUrl}
          onChange={(e) => setServerUrl(e.target.value)}
        />
      </label>
      <h1>Welcome to the {roomId} room!</h1>
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState("general");
  return (
    <>
      <label>
        Choose the chat room:{" "}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

ì´ê²ƒì€ ë¦¬ì•¡íŠ¸ ì—ëŸ¬ ê°™ì§€ë§Œ, ì´ê²ƒì€ ì‚¬ì‹¤ ë¦¬ì•¡íŠ¸ê°€ ë²„ê·¸ê°€ ìˆëŠ” ì½”ë“œë¥¼ ì•Œë ¤ì£¼ëŠ” ê²ƒì´ë‹¤. roomIdì™€ serverUrlì€ ë§¤ë²ˆ ë³€ê²½ ë˜ëŠ”ë°, ë‹¹ì‹ ì€ ê·¸ë“¤ì´ ë³€ê²½ ëì„ ë•Œ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶”ëŠ” ê²ƒì„ ê¹œë¹¡í–ˆë‹¤. ìœ ì €ê°€ UIì—ì„œ ë‹¤ë¥¸ ê°’ì„ ì„ íƒí•´ë„, ì—°ê²° ì´ˆê¸°ì˜ roomIdì™€ serverUrlë¡œ ë‚¨ì•„ìˆì„ ê²ƒì´ë‹¤.

ì´ ë²„ê·¸ë¥¼ ê³ ì¹˜ê¸° ìœ„í•´, ë¦°í„°ì˜ ì œì•ˆì„ ë”°ë¼ roomIdì™€ serverUrlì„ ì´í™íŠ¸ì˜ ì˜ì¡´ì„±ì— ì¶”ê°€í•œë‹¤.

```jsx
function ChatRoom({ roomId }) {
  // roomId is reactive
  const [serverUrl, setServerUrl] = useState("https://localhost:1234"); // serverUrl is reactive
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [serverUrl, roomId]); // âœ… All dependencies declared
  // ...
}
```

ë¦°í„°ì˜ ì—ëŸ¬ëŠ” ì‚¬ë¼ì§€ê³ , ì±—ì€ í•„ìš”ì— ë”°ë¼ ì¬ì—°ê²°ëœë‹¤.

#### Note

ê°€ë”, ë¦¬ì•¡íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ì„ ì–¸ëœ ê°’ì´ ì ˆëŒ€ ë³€í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ì•ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, useStateì˜ ë°˜í™˜ ê°’ì¸ set í•¨ìˆ˜ì™€ useRefì—ì„œ ë°˜í™˜ëœ ref ì˜¤ë¸Œì íŠ¸ëŠ” ì•ˆì „í•˜ë‹¤ - ê·¸ë“¤ì€ ë¦¬ëœë”ì‹œì—ë„ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ê²ƒì´ ë³´ì¥ëœë‹¤. ì´ëŸ° ì•ˆì •ëœ ê°’ì€ ë°˜ì‘ì´ ì•„ë‹ˆë¯€ë¡œ, ì˜ì¡´ì„±ì—ì„œ ìƒëµí•  ìˆ˜ ìˆë‹¤. í¬í•¨í•˜ëŠ” ê²ƒë„ í—ˆìš©ëœë‹¤. - ê·¸ë“¤ì€ ë³€í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ë¬¸ì œê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤.

### What to do when you donâ€™t want to re-synchronize

ì´ì „ ì˜ˆì—ì„œ roomIdì™€ roomIdë¥¼ ì˜ì¡´ì„±ì— ì¶”ê°€í•´ ë¦°íŠ¸ ì—ëŸ¬ë¥¼ í•´ê²°í–ˆë‹¤.

í•˜ì§€ë§Œ, ë¦°í„°ì— ë°˜ì‘ì„± ê°’ì´ ì•„ë‹ˆë¼ëŠ” ê²ƒì„ ì¦ëª…í•˜ê¸° ìœ„í•´(ë³€ê²½ì´ ë¦¬ëœë”ë¥¼ ì¼ìœ¼í‚¤ì§€ ì•ŠëŠ” ê²ƒ), ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆë‹¤.

```jsx
const serverUrl = "https://localhost:1234"; // serverUrl is not reactive
const roomId = "general"; // roomId is not reactive

function ChatRoom() {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, []); // âœ… All dependencies declared
  // ...
}
```

ë˜ ë‹¹ì‹ ì€, ì´í™íŠ¸ ì•ˆìœ¼ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆë‹¤. ê·¸ë“¤ì€ ëœë”ì¤‘ ê³„ì‚° ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ê·¸ë“¤ì€ ë°˜ì‘ì„±ì´ ì•„ë‹ˆë‹¤.

```jsx
function ChatRoom() {
  useEffect(() => {
    const serverUrl = "https://localhost:1234"; // serverUrl is not reactive
    const roomId = "general"; // roomId is not reactive
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, []); // âœ… All dependencies declared
  // ...
}
```

ì´í™íŠ¸ëŠ” ë°˜ì‘í•˜ëŠ” ì½”ë“œì˜ ë¸”ë½ì´ë‹¤. ê·¸ë“¤ì€ ë‚´ë¶€ì˜ ê°’ì´ ë°”ë€Œë©´ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶˜ë‹¤. ìƒí˜¸ ì‘ìš©ì— ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì™€ ë‹¤ë¥´ê²Œ, ì´í™íŠ¸ëŠ” ì‹±í¬ê°€ í•„ìš”í•œ ê²½ìš° ì‹¤í–‰ëœë‹¤.

ë‹¹ì‹ ì€ ì˜ì¡´ì„±ì„ ì„ íƒí•  ìˆ˜ ì—†ë‹¤. ë‹¹ì‹ ì€ ë°˜ë“œì‹œ ì´í™íŠ¸ì—ì„œ ì½ëŠ” ëª¨ë“  ë°˜ì‘ ê°’ì„ ì˜ì¡´ì„±ì— í¬í•¨ì‹œì¼œì•¼í•œë‹¤.
ë¦°í„°ê°€ ì´ê²ƒì„ ê°•ì œí•œë‹¤. ê°€ë” ì´ê²ƒì€ ë¬´í•œ ë£¨í”„ì™€ ë„ˆë¬´ ìì£¼ ì‹±í¬ë¥¼ ë§ì¶”ëŠ” ë¬¸ì œë¥¼ ì¼ìœ¼í‚¨ë‹¤.
ë¦°í„°ë¥¼ ì–µì œí•´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ í•˜ì§€ ë§ˆë¼.

ëŒ€ì‹  ì‹œë„í•  ë°©ë²•

- ë‹¹ì‹ ì˜ ì´í™íŠ¸ê°€ ë…ë¦½ì ì¸ ì‹±í¬ ì‘ì—…ì„ í•˜ëŠ”ì§€ í™•ì¸. ë§Œì•½ ë‹¹ì‹ ì˜ ì´í™íŠ¸ê°€ ì–´ë–¤ê²ƒë„ ì‹±í¬ë¥¼ ë§ì¶”ì§€ ì•ŠëŠ” ë‹¤ë©´ ë¶ˆí•„ìš”í•˜ë‹¤. ë§Œì•½ ì—¬ëŸ¬ ì‹±í¬ë¥¼ ë§ì¶˜ë‹¤ë©´ ë¶„ë¦¬í•´ë¼.
- ë§Œì•½ ìµœì‹  ìƒíƒœì™€ í”„ëì„ ë°˜ì‘í•˜ëŠ” ê²ƒì„ ì´í™íŠ¸ì˜ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶”ëŠ” ê²ƒìœ¼ë¡œ ì½ê¸° ì‹«ë‹¤ë©´, ë‹¹ì‹ ì€ ì´í™íŠ¸ë¥¼ ë°˜ì‘í•˜ëŠ” ë¶€ë¶„ê³¼ ë°˜ì‘í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.
- ê°ì²´ì™€ í•¨ìˆ˜ë¥¼ ì˜ì¡´ì„±ì— ë„£ëŠ” ê²ƒì„ í”¼í•´ë¼. ë§Œì•½ ë‹¹ì‹ ì´ ëœë”ì¤‘ ê°ì²´ì™€ í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ê³  ì´í™íŠ¸ê°€ ì½ë„ë¡ í•˜ë©´, ê·¸ë“¤ì€ ë§¤ë²ˆ ë‹¤ë¥¼ ê²ƒì´ë‹¤. ì´ê²ƒì€ ì´í™íŠ¸ê°€ ë§¤ë²ˆ ì‹±í¬ë¥¼ ë§ì¶”ë„ë¡ í•œë‹¤.

#### Pitfall

ë¦°í„°ëŠ” ë‹¹ì‹ ì˜ ì¹œêµ¬ì§€ë§Œ, í•œì •ì ì´ë‹¤. ë¦°í„°ëŠ” ì˜ì¡´ì„±ì´ í‹€ë ¸ì„ ê²½ìš°ë§Œ ì•ˆë‹¤.
ì´ê²ƒì€ ê° ìƒí™©ì„ í•´ê²°í•˜ëŠ” ìµœê³ ì˜ ë°©ë²•ì„ ì•Œì§€ ëª»í•œë‹¤. ë§Œì•½ ë¦°í„°ê°€ ì˜ì¡´ì„±ì— ì¶”ê°€í•˜ë¼ëŠ” ì œì•ˆì„ í•˜ê³ , ì¶”ê°€ê°€ ë£¨í”„ë¥¼ ìœ ë°œí•œë‹¤ê³  í•´ì„œ ë¦°í„°ê°€ ë¬´ì‹œë˜ì–´ì•¼ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì´í™íŠ¸ ë‚´ë¶€ì™€ ì™¸ë¶€ ì½”ë“œì˜ ë°˜ì‘í•˜ì§€ ì•ŠëŠ” ê°’ê³¼ ë¶ˆí•„ìš” ì˜ì¡´ì„±ì„ ë³€ê²½í•´ì•¼ í•œë‹¤.

ê¸°ì¡´ì˜ ì½”ë“œê°€ ì¡´ì¬í•˜ë©´ ì´í™íŠ¸ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë¦°íŠ¸ë¥¼ ì œí•œí•  ìˆ˜ ìˆë‹¤.

```jsx
useEffect(() => {
  // ...
  // ğŸ”´ Avoid suppressing the linter like this:
  // eslint-ignore-next-line react-hooks/exhaustive-deps
}, []);
```

ë‹¤ìŒ í˜ì´ì§€ì—ì„œ ë£°ì„ ê¹¨ì§€ì•Šê³  í•´ê²°í•˜ëŠ” ë²•ì„ ë‹¤ë£¬ë‹¤.

## Recap

- ì»´í¬ë„ŒíŠ¸ëŠ” ë§ˆìš´íŠ¸, ì—…ë°ì´íŠ¸, ì–¸ë§ˆìš´íŠ¸ í•œë‹¤.
- ê° ì´í™íŠ¸ëŠ” ì£¼ìœ„ ì»´í¬ë„ŒíŠ¸ì— ë”°ë¼ ë‹¤ë¥¸ ë¼ì´í”„ì‚¬ì´í´ì„ ê°–ëŠ”ë‹¤.
- ê° ì´í™íŠ¸ëŠ” ì‹±í¬ë¥¼ ì‹œì‘/ì¤‘ì§€í•˜ëŠ” ê° ì‘ì—…ì„ ì„¤ëª…í•œë‹¤.
- ì´í™íŠ¸ë¥¼ ì‘ì„±í•  ë•Œ, ì´í™íŠ¸ì˜ ê´€ì ì—ì„œ ì‘ì„±í•´ë¼.
- ì»´í¬ë„ŒíŠ¸ ëª¸ì²´ì— ì„ ì–¸ëœ ê°’ì€ ë°˜ì‘ì„±ì´ ìˆë‹¤.
- ë°˜ì‘ ê°’ì€ ë³€ê²½ë˜ë¯€ë¡œ ì´í™íŠ¸ê°€ ì‹±í¬ë¥¼ ë‹¤ì‹œ ë§ì¶”ë„ë¡ í•œë‹¤.
- ë¦°í„°ëŠ” ì´í™íŠ¸ ì•ˆì— ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ë°˜ì‘ ê°’ì„ ì˜ì¡´ì„±ì— ëª…ì‹œí•˜ë„ë¡ ê²€ì‚¬í•œë‹¤.
- ëª¨ë“  ë¦°í„° ì—ëŸ¬ëŠ” ì •ë‹¹í•˜ë‹¤. ë£°ì„ ê¹¨ì§€ ì•Šê³  ê³ ì¹˜ëŠ” ë²•ì´ ìˆë‹¤.

---

## What I Learned

ì´í™íŠ¸ë¥¼ ìƒê°í•  ë•Œ í•­ìƒ ì»´í¬ë„ŒíŠ¸ ê´€ì ì—ì„œ ìƒê°ì„ í–ˆëŠ”ë°, ë¬¸ì„œë¥¼ ì½ìœ¼ë©° ì´í™íŠ¸ì˜ ê´€ì ì—ì„œ ìƒê°í•´ì•¼ í•˜ëŠ” ê²ƒì„ ì•Œê²Œë˜ì—ˆë‹¤.
ì¦‰ ë§ˆìš´íŠ¸, ì—…ë°ì´íŠ¸, ì–¸ë§ˆìš´íŠ¸ê°€ ì•„ë‹Œ ì–¸ì œ ì‹±í¬ë¥¼ ë§ì¶”ê³  ì¤‘ì§€í• ì§€ì˜ ê´€ì ì—ì„œ ë´ì•¼í•œë‹¤.

ë˜ ê°€ë” ìƒíƒœë¥¼ setí•´ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ì˜ì¡´ì„± ë°°ì—´ì— ì¶”ê°€í–ˆì—ˆëŠ”ë°, ë¦¬ì•¡íŠ¸ê°€ ì´ë¯¸ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ê²ƒì„ ì•Œê³  ìˆëŠ” ê°’ì´ê¸°ì— ì¶”ê°€í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ê²ƒì„ ì•Œê²Œë˜ì—ˆë‹¤. -> ì˜ˆì „ì— ì–´ë””ì„œ ì¶”ê°€ì•ˆí•´ë„ ëœë‹¤ëŠ” ê¸€ì„ ì½ì—ˆëŠ”ë°, ì¢€ ë” ëª…í™•í•´ì¡Œë‹¤.
